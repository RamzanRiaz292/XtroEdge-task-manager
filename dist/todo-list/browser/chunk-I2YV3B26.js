import{a as k,b as S,c as I,d as E,e as L,f as z,n as F,p as D}from"./chunk-7VNJ2DCA.js";import{c as y}from"./chunk-CFMN2QYF.js";import{$a as n,Da as d,Ja as M,Na as m,Wb as b,Z as p,_ as c,_a as s,_b as h,ab as t,bb as l,cb as C,db as f,eb as x,ec as w,fc as v,ib as P,lb as O,mb as o,nb as u,za as a}from"./chunk-BZLZP6YE.js";function V(g,r){if(g&1&&(n(0,"div",22)(1,"span",23),o(2,"\u26A0\uFE0F"),t(),n(3,"span"),o(4),t()()),g&2){let i=x();a(4),u(i.errorMessage)}}function Y(g,r){g&1&&l(0,"span",24)}var N=class g{constructor(r,i){this.http=r;this.router=i}inputType="password";iconClass="ri-eye-off-fill";errorMessage="";isLoading=!1;email="";password="";API_URL=this.getApiUrl();getApiUrl(){let r=window.location.href;return r.includes("localhost")||r.includes("127.0.0.1")?"http://localhost:3000/api":"https://xtro-edge-task-manager-backend.vercel.app/api"}togglePassword(){this.inputType=this.inputType==="password"?"text":"password",this.iconClass=this.inputType==="password"?"ri-eye-off-fill":"ri-eye-fill"}clearForm(){this.email="",this.password="",this.errorMessage=""}onLogin(r){if(!r.valid){this.errorMessage="Please fill all required fields";return}this.isLoading=!0,this.errorMessage="";let i={email:r.value.email,password:r.value.password};this.http.post(`${this.API_URL}/login`,i).subscribe({next:e=>{this.isLoading=!1,localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),localStorage.setItem("userId",e.user.id.toString()),localStorage.setItem("userEmail",e.user.email),localStorage.setItem("userName",e.user.name),localStorage.setItem("userRole",e.user.role),e.user.role==="manager"?this.router.navigate(["/manager-tasks"]):this.router.navigate(["/tasks"])},error:e=>{console.error("\u274C Login Failed:",e),this.isLoading=!1,e.status===400?this.errorMessage="Invalid email or password format":e.status===401?this.errorMessage="Invalid credentials":e.status===0?this.errorMessage="Cannot connect to server. Please make sure backend is running.":this.errorMessage=e.error?.error||"Login failed. Please try again.",console.log("Error details:",e)}})}logout(){localStorage.removeItem("user"),localStorage.removeItem("userId"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userEmail"),localStorage.removeItem("userName"),localStorage.removeItem("userRole"),this.router.navigate(["/login"])}static \u0275fac=function(i){return new(i||g)(d(w),d(y))};static \u0275cmp=M({type:g,selectors:[["app-login-form"]],decls:44,vars:7,consts:[["loginForm","ngForm"],[1,"login-page"],[1,"login-card"],[1,"login-header"],[1,"logo"],["class","alert alert-danger",4,"ngIf"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email"],[1,"input-wrapper"],["type","email","id","email","name","email","ngModel","","placeholder","Enter your email","required",""],[1,"input-icon"],["for","password"],["id","password","name","password","ngModel","","placeholder","Enter your password","required","",3,"type"],["type","button",1,"toggle-password",3,"click"],[1,"form-options"],[1,"remember-me"],["type","checkbox","id","rememberMe"],["for","rememberMe"],["type","submit",1,"btn-login",3,"disabled"],["class","spinner",4,"ngIf"],[1,"login-info"],[1,"alert","alert-danger"],[1,"alert-icon"],[1,"spinner"]],template:function(i,e){if(i&1){let _=C();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span"),o(5,"\u{1F4CB}"),t()(),n(6,"h1"),o(7,"Welcome Back"),t(),n(8,"p"),o(9,"Sign in to continue to Task Manager"),t()(),m(10,V,5,1,"div",5),n(11,"form",6,0),f("ngSubmit",function(){p(_);let R=P(12);return c(e.onLogin(R))}),n(13,"div",7)(14,"label",8),o(15,"Email Address"),t(),n(16,"div",9),l(17,"input",10),n(18,"span",11),o(19,"\u{1F4E7}"),t()()(),n(20,"div",7)(21,"label",12),o(22,"Password"),t(),n(23,"div",9),l(24,"input",13),n(25,"span",11),o(26,"\u{1F512}"),t(),n(27,"button",14),f("click",function(){return p(_),c(e.togglePassword())}),l(28,"i"),t()()(),n(29,"div",15)(30,"div",16),l(31,"input",17),n(32,"label",18),o(33,"Remember me"),t()()(),n(34,"button",19),m(35,Y,1,0,"span",20),n(36,"span"),o(37),t()()(),n(38,"div",21)(39,"p"),o(40,"New employees? Please contact your "),n(41,"strong"),o(42,"manager"),t(),o(43," to create an account."),t()()()()}i&2&&(a(10),s("ngIf",e.errorMessage),a(14),s("type",e.inputType),a(4),O(e.iconClass),a(6),s("disabled",e.isLoading),a(),s("ngIf",e.isLoading),a(2),u(e.isLoading?"Signing in...":"Sign In"))},dependencies:[D,z,k,S,I,F,L,E,h,b,v],styles:['.login-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px;position:relative;overflow:hidden}.login-page[_ngcontent-%COMP%]:before, .login-page[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:50%;background:#ffffff1a;animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}.login-page[_ngcontent-%COMP%]:before{width:400px;height:400px;top:-100px;right:-100px}.login-page[_ngcontent-%COMP%]:after{width:300px;height:300px;bottom:-80px;left:-80px;animation-delay:3s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(5deg)}}.login-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:24px;box-shadow:0 25px 50px #00000026;width:100%;max-width:440px;padding:50px 40px;position:relative;z-index:1;animation:_ngcontent-%COMP%_slideUp .5s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:70px;height:70px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:20px;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;box-shadow:0 10px 30px #667eea66}.login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:32px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#1a202c;margin:0 0 10px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:15px;margin:0}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:24px;position:relative}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#2d3748;margin-bottom:8px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:#a0aec0;font-size:18px;transition:color .3s ease}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 48px;font-size:15px;border:2px solid #e2e8f0;border-radius:12px;background:#f7fafc;color:#1a202c;transition:all .3s ease}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 4px #667eea26}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .input-icon[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ .input-icon[_ngcontent-%COMP%]{color:#667eea}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:16px;top:50%;transform:translateY(-50%);background:none;border:none;color:#a0aec0;cursor:pointer;padding:4px;transition:color .3s ease}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#667eea}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.login-form[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.login-form[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]   .remember-me[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.login-form[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]   .remember-me[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:#667eea;cursor:pointer}.login-form[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]   .remember-me[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#4a5568;cursor:pointer}.login-form[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{font-size:14px;color:#667eea;text-decoration:none;font-weight:500}.login-form[_ngcontent-%COMP%]   .form-options[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-form[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{width:100%;padding:16px;font-size:16px;font-weight:600;color:#fff;background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:12px;cursor:pointer;transition:all .3s ease;box-shadow:0 8px 25px #667eea59;display:flex;align-items:center;justify-content:center;gap:10px}.login-form[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 35px #667eea73}.login-form[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-form[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.login-form[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.alert[_ngcontent-%COMP%]{padding:14px 18px;border-radius:12px;margin-bottom:24px;display:flex;align-items:center;gap:12px;font-size:14px;animation:_ngcontent-%COMP%_shake .5s ease}.alert.alert-danger[_ngcontent-%COMP%]{background:#f565651a;color:#c53030;border:1px solid rgba(245,101,101,.3)}.alert.alert-success[_ngcontent-%COMP%]{background:#48bb781a;color:#276749;border:1px solid rgba(72,187,120,.3)}.alert[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{font-size:20px}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-5px)}20%,40%,60%,80%{transform:translate(5px)}}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:30px;padding-top:24px;border-top:1px solid #e2e8f0}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:14px;margin:0}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;font-weight:600;text-decoration:none}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-info[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background:#667eea14;border-radius:12px;text-align:center}.login-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4a5568;font-size:13px;margin:0;line-height:1.6}.login-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#667eea}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:24px;z-index:10}.loading-overlay[_ngcontent-%COMP%]   .spinner-large[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(102,126,234,.2);border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4a5568;font-size:15px;font-weight:500}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:40px 24px;margin:10px}.login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:60px;height:60px}.login-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:28px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.form-options[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:flex-start}}']})};export{N as LoginForm};
